{
  "rpc": {
    "protocol_name": "yai-rpc",
    "protocol_version": 1,
    "envelope": {
      "schema_id": "rpc.envelope.v1",
      "required": ["v", "trace_id", "arming", "role", "request"],
      "fields": {
        "v": "u8",
        "trace_id": "string",
        "ws_id": "string|null",
        "arming": "bool",
        "role": "string",
        "request": {
          "type": "string",
          "payload": "object|null"
        },
        "ok": "bool|null",
        "response": {
          "type": "string",
          "payload": "object|null"
        },
        "error": {
          "code": "string",
          "message": "string",
          "detail": "object|null"
        }
      },
      "constraints": {
        "trace_id_max_len": 64,
        "ws_id_max_len": 64
      }
    },
    "handshake": {
      "required_first": true,
      "request_type": "protocol_handshake",
      "request_payload": {
        "client_version": "string",
        "capabilities": "string[]"
      },
      "response_type": "protocol_handshake_ok",
      "response_payload": {
        "protocol_version": "u8",
        "server_version": "string",
        "capabilities": "string[]",
        "policy": "object|null"
      }
    }
  }
}